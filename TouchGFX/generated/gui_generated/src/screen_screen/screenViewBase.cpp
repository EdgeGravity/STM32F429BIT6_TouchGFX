/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/screen_screen/screenViewBase.hpp>
#include <touchgfx/Color.hpp>
#include <texts/TextKeysAndLanguages.hpp>
#include "BitmapDatabase.hpp"

screenViewBase::screenViewBase() :
    interaction1Counter(0),
    interaction2EndedCallback(this, &screenViewBase::interaction2EndedCallbackHandler)
{

    boxBG.setPosition(0, 0, 800, 480);
    boxBG.setColor(touchgfx::Color::getColorFrom24BitRGB(26, 164, 189));

    textAreaHelloWorld.setXY(149, 216);
    textAreaHelloWorld.setColor(touchgfx::Color::getColorFrom24BitRGB(0, 0, 0));
    textAreaHelloWorld.setLinespacing(0);
    textAreaHelloWorld.setTypedText(touchgfx::TypedText(T_SINGLEUSEID2));

    boxProgress1.setXY(198, 314);
    boxProgress1.setProgressIndicatorPosition(2, 2, 400, 30);
    boxProgress1.setRange(0, 100);
    boxProgress1.setDirection(touchgfx::AbstractDirectionProgress::RIGHT);
    boxProgress1.setBackground(touchgfx::Bitmap(BITMAP_BLUE_PROGRESSINDICATORS_BG_LARGE_PROGRESS_INDICATOR_BG_SQUARE_0_DEGREES_ID));
    boxProgress1.setColor(touchgfx::Color::getColorFrom24BitRGB(0, 151, 255));
    boxProgress1.setValue(30);

    add(boxBG);
    add(textAreaHelloWorld);
    add(boxProgress1);
}

void screenViewBase::setupScreen()
{

}

//Handles delays
void screenViewBase::handleTickEvent()
{
    if(interaction1Counter > 0)
    {
        interaction1Counter--;
        if(interaction1Counter == 0)
        {
            //Interaction2
            //When Interaction1 completed fade textAreaHelloWorld
            //Fade textAreaHelloWorld to alpha:100 with LinearInOut easing in 1000 ms (60 Ticks)
            textAreaHelloWorld.clearFadeAnimationEndedAction();
            textAreaHelloWorld.startFadeAnimation(100, 60, touchgfx::EasingEquations::linearEaseInOut);
            textAreaHelloWorld.setFadeAnimationEndedAction(interaction2EndedCallback);
        }
    }
}

//Called when the screen is done with transition/load
void screenViewBase::afterTransition()
{
    //Interaction1
    //When screen is entered delay
    //Delay for 500 ms (30 Ticks)
    interaction1Counter = INTERACTION1_DURATION;
}

void screenViewBase::interaction2EndedCallbackHandler(const touchgfx::FadeAnimator<touchgfx::TextArea>& comp)
{
    //Interaction3
    //When Interaction2 completed change screen to screen
    //Go to screen with screen transition towards East
    application().gotoscreenScreenSlideTransitionEast();
}
